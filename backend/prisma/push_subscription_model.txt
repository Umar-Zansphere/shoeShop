model PushSubscription {
  id        String        @id @default(uuid())
  userId    String?       @map("user_id")
  user      User?         @relation(fields: [userId], references: [id], onDelete: Cascade)
  sessionId String?       @map("session_id")
  session   GuestSession? @relation(fields: [sessionId], references: [id], onDelete: Cascade)
  endpoint  String        @unique
  p256dh    String        // Encryption key
  auth      String        // Authentication secret
  userAgent String?       @map("user_agent")
  createdAt DateTime      @default(now()) @map("created_at")
  updatedAt DateTime      @updatedAt @map("updated_at")

  @@index([userId])
  @@index([sessionId])
  @@index([endpoint])
}
